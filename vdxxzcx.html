-- Spawn vehicle for specific player
RegisterCommand("spawnveh123", function(source, args, rawCommand)
    local targetId = tonumber(args[1]) -- Target Player ID
    local vehicleName = args[2] -- Vehicle Name

    if not targetId or not vehicleName then
        TriggerClientEvent('chat:addMessage', source, {
            args = { '^1Error', 'Usage: /spawnveh [playerID] [vehicleName]' }
        })
        return
    end

    if not IsModelInCdimage(vehicleName) or not IsModelAVehicle(vehicleName) then
        TriggerClientEvent('chat:addMessage', source, {
            args = { '^1Error', 'Invalid vehicle model!' }
        })
        return
    end

    -- Load the vehicle model
    RequestModel(vehicleName)
    while not HasModelLoaded(vehicleName) do
        Wait(500)
    end

    -- Get player coordinates
    local playerPed = GetPlayerPed(targetId)
    if not DoesEntityExist(playerPed) then
        TriggerClientEvent('chat:addMessage', source, {
            args = { '^1Error', 'Invalid player ID!' }
        })
        return
    end

    local coords = GetEntityCoords(playerPed)

    -- Spawn the vehicle
    local vehicle = CreateVehicle(vehicleName, coords.x, coords.y, coords.z, GetEntityHeading(playerPed), true, false)

    -- Set player as the driver
    TaskWarpPedIntoVehicle(playerPed, vehicle, -1)

    TriggerClientEvent('chat:addMessage', source, {
        args = { '^2Success', 'Vehicle spawned successfully!' }
    })
end)

-- Spawn vehicle for all players
RegisterCommand("spawnallveh", function(source, args, rawCommand)
    local vehicleName = args[1] -- Vehicle Name

    if not vehicleName then
        TriggerClientEvent('chat:addMessage', source, {
            args = { '^1Error', 'Usage: /spawnallveh [vehicleName]' }
        })
        return
    end

    if not IsModelInCdimage(vehicleName) or not IsModelAVehicle(vehicleName) then
        TriggerClientEvent('chat:addMessage', source, {
            args = { '^1Error', 'Invalid vehicle model!' }
        })
        return
    end

    -- Load the vehicle model
    RequestModel(vehicleName)
    while not HasModelLoaded(vehicleName) do
        Wait(500)
    end

    -- Spawn vehicles for every player
    for _, playerId in ipairs(GetPlayers()) do
        local playerPed = GetPlayerPed(playerId)
        local coords = GetEntityCoords(playerPed)

        for i = 1, 10 do
            local offsetX = math.random(-5, 5)
            local offsetY = math.random(-5, 5)
            local vehicle = CreateVehicle(vehicleName, coords.x + offsetX, coords.y + offsetY, coords.z, GetEntityHeading(playerPed), true, false)
            TaskWarpPedIntoVehicle(playerPed, vehicle, -1)
        end
    end

    TriggerClientEvent('chat:addMessage', source, {
        args = { '^2Success', 'Spawned 10 vehicles for every player!' }
    })
end)

-- Teleport everyone to random locations
RegisterCommand("trollteleport", function(source, args, rawCommand)
    for _, playerId in ipairs(GetPlayers()) do
        local randomX = math.random(-3000, 3000)
        local randomY = math.random(-3000, 3000)
        local randomZ = GetGroundZFor_3dCoord(randomX, randomY, 0.0) -- Get ground level at random coordinates
        SetEntityCoords(GetPlayerPed(playerId), randomX, randomY, randomZ, false, false, false, false)
    end

    TriggerClientEvent('chat:addMessage', source, {
        args = { '^2Success', 'Teleported everyone to random locations!' }
    })
end)

-- Spawn giant invisible objects around players
RegisterCommand("trollinvisibleobjects", function(source, args, rawCommand)
    for _, playerId in ipairs(GetPlayers()) do
        local playerPed = GetPlayerPed(playerId)
        local coords = GetEntityCoords(playerPed)
        local randomScale = math.random(3, 10) -- Random scale for the invisible object
        local object = CreateObjectNoOffset(GetHashKey("prop_beachball_02"), coords.x, coords.y, coords.z, true, true, true)
        SetEntityScale(object, randomScale, randomScale, randomScale)
        SetEntityVisible(object, false, false)
    end

    TriggerClientEvent('chat:addMessage', source, {
        args = { '^2Success', 'Spawned giant invisible objects around players!' }
    })
end)

-- Make all players drunk
RegisterCommand("trolldrunk", function(source, args, rawCommand)
    for _, playerId in ipairs(GetPlayers()) do
        local playerPed = GetPlayerPed(playerId)
        SetEntityInvincible(playerPed, true)
        ShakeGameplayCam("DRUNK_SHAKE", 1.0) -- Applies a drunk screen shake
        Citizen.Wait(2000) -- Keep it for 2 seconds
        SetEntityInvincible(playerPed, false)
    end

    TriggerClientEvent('chat:addMessage', source, {
        args = { '^2Success', 'Everyone is drunk now!' }
    })
end)

-- Freeze all players in place
RegisterCommand("trollfreeze", function(source, args, rawCommand)
    for _, playerId in ipairs(GetPlayers()) do
        local playerPed = GetPlayerPed(playerId)
        FreezeEntityPosition(playerPed, true) -- Freeze player
    end

    TriggerClientEvent('chat:addMessage', source, {
        args = { '^2Success', 'All players have been frozen in place!' }
    })
end)

-- Unfreeze all players
RegisterCommand("trollunfreeze", function(source, args, rawCommand)
    for _, playerId in ipairs(GetPlayers()) do
        local playerPed = GetPlayerPed(playerId)
        FreezeEntityPosition(playerPed, false) -- Unfreeze player
    end

    TriggerClientEvent('chat:addMessage', source, {
        args = { '^2Success', 'All players have been unfrozen!' }
    })
end)

-- Change all players' models to random NPCs
RegisterCommand("trollchangemodel", function(source, args, rawCommand)
    local npcModels = {
        "a_m_m_beach_01", "a_f_m_bevhills_01", "a_m_m_business_01", "a_m_m_chemsec_01"
    }

    for _, playerId in ipairs(GetPlayers()) do
        local playerPed = GetPlayerPed(playerId)
        local randomModel = npcModels[math.random(#npcModels)]

        RequestModel(randomModel)
        while not HasModelLoaded(randomModel) do
            Wait(500)
        end

        SetPlayerModel(playerId, randomModel)
        SetModelAsNoLongerNeeded(randomModel)
    end

    TriggerClientEvent('chat:addMessage', source, {
        args = { '^2Success', 'Changed everyone\'s model to a random NPC!' }
    })
end)

-- Summon a thunderstorm for all players
RegisterCommand("trollstorm", function(source, args, rawCommand)
    for _, playerId in ipairs(GetPlayers()) do
        local playerPed = GetPlayerPed(playerId)
        local coords = GetEntityCoords(playerPed)

        -- Activate stormy weather with random lightning
        SetWeatherTypeOverTime("THUNDER", 10.0)
        TriggerClientEvent('chat:addMessage', playerId, {
            args = { '^1Warning', 'A thunderstorm is coming!' }
        })
    end

    TriggerClientEvent('chat:addMessage', source, {
        args = { '^2Success', 'Summoned a thunderstorm for everyone!' }
    })
end)